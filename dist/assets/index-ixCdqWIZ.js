const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-CJIyS0wL.js","assets/react-vendor-4aaj0ASt.js"])))=>i.map(i=>d[i]);
import{r as k,a as vn,g as gn,c as W,u as yn,b as dr,B as pn,R as _n,d as rt}from"./react-vendor-4aaj0ASt.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var hr={exports:{}},Ye={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=k,bn=Symbol.for("react.element"),kn=Symbol.for("react.fragment"),xn=Object.prototype.hasOwnProperty,Sn=wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jn={key:!0,ref:!0,__self:!0,__source:!0};function fr(r,e,t){var n,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)xn.call(e,n)&&!jn.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:bn,type:r,key:i,ref:a,props:s,_owner:Sn.current}}Ye.Fragment=kn;Ye.jsx=fr;Ye.jsxs=fr;hr.exports=Ye;var h=hr.exports,mr,Bt=vn;mr=Bt.createRoot,Bt.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var On={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),vr=(r,e)=>{const t=k.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},c)=>k.createElement("svg",{ref:c,...On,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Pn(r)}`,o].join(" "),...u},[...e.map(([d,f])=>k.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=vr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=vr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),En="modulepreload",Dn=function(r){return"/"+r},qt={},ge=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=Dn(l),l in qt)return;qt[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":En,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Nn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:n}=await Promise.resolve().then(()=>_e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class jt extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Mn extends jt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class An extends jt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $n extends jt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vt;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(vt||(vt={}));var Rn=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};class In{constructor(e,{headers:t={},customFetch:n,region:s=vt.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Nn(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Rn(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(v=>{throw new Mn(v)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new An(c);if(!c.ok)throw new $n(c);let f=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield c.json():f==="application/octet-stream"?m=yield c.blob():f==="text/event-stream"?m=c:f==="multipart/form-data"?m=yield c.formData():m=yield c.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var R={},Ot={},He={},Ee={},Je={},ze={},Ln=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ye=Ln();const Fn=ye.fetch,gr=ye.fetch.bind(ye),yr=ye.Headers,Un=ye.Request,Wn=ye.Response,_e=Object.freeze(Object.defineProperty({__proto__:null,Headers:yr,Request:Un,Response:Wn,default:gr,fetch:Fn},Symbol.toStringTag,{value:"Module"})),Bn=gn(_e);var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});let qn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ge.default=qn;var pr=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ze,"__esModule",{value:!0});const Yn=pr(Bn),Hn=pr(Ge);let Jn=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Yn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let u=null,c=null,d=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=x:c=JSON.parse(x))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");y&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,m="OK")}catch{i.status===404&&y===""?(f=204,m="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new Hn.default(u)}return{error:u,data:c,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};ze.default=Jn;var zn=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});const Gn=zn(ze);let Vn=class extends Gn.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Je.default=Vn;var Kn=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ee,"__esModule",{value:!0});const Qn=Kn(Je);let Xn=class extends Qn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Ee.default=Xn;var Zn=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});const ke=Zn(Ee);let es=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new ke.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new ke.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new ke.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new ke.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ke.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};He.default=es;var Ve={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.version=void 0;Ke.version="0.0.0-automated";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.DEFAULT_HEADERS=void 0;const ts=Ke;Ve.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ts.version}`};var _r=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ot,"__esModule",{value:!0});const rs=_r(He),ns=_r(Ee),ss=Ve;let is=class wr{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},ss.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new rs.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new wr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{o.searchParams.append(c,d)})):(a="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ns.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ot.default=is;var we=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(R,"__esModule",{value:!0});R.PostgrestError=R.PostgrestBuilder=R.PostgrestTransformBuilder=R.PostgrestFilterBuilder=R.PostgrestQueryBuilder=R.PostgrestClient=void 0;const br=we(Ot);R.PostgrestClient=br.default;const kr=we(He);R.PostgrestQueryBuilder=kr.default;const xr=we(Ee);R.PostgrestFilterBuilder=xr.default;const Sr=we(Je);R.PostgrestTransformBuilder=Sr.default;const jr=we(ze);R.PostgrestBuilder=jr.default;const Or=we(Ge);R.PostgrestError=Or.default;var as=R.default={PostgrestClient:br.default,PostgrestQueryBuilder:kr.default,PostgrestFilterBuilder:xr.default,PostgrestTransformBuilder:Sr.default,PostgrestBuilder:jr.default,PostgrestError:Or.default};const{PostgrestClient:os,PostgrestQueryBuilder:Rl,PostgrestFilterBuilder:Il,PostgrestTransformBuilder:Ll,PostgrestBuilder:Fl,PostgrestError:Ul}=as,ls="2.11.2",cs={"X-Client-Info":`realtime-js/${ls}`},us="1.0.0",Pr=1e4,ds=1e3;var ve;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ve||(ve={}));var F;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(F||(F={}));var B;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(B||(B={}));var gt;(function(r){r.websocket="websocket"})(gt||(gt={}));var ie;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ie||(ie={}));class hs{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+s));a=a+s;const l=n.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Tr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var C;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(C||(C={}));const Yt=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=fs(a,r,e,s),i),{})},fs=(r,e,t,n)=>{const s=e.find(o=>o.name===r),i=s==null?void 0:s.type,a=t[r];return i&&!n.includes(i)?Cr(i,a):yt(a)},Cr=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ys(e,t)}switch(r){case C.bool:return ms(e);case C.float4:case C.float8:case C.int2:case C.int4:case C.int8:case C.numeric:case C.oid:return vs(e);case C.json:case C.jsonb:return gs(e);case C.timestamp:return ps(e);case C.abstime:case C.date:case C.daterange:case C.int4range:case C.int8range:case C.money:case C.reltime:case C.text:case C.time:case C.timestamptz:case C.timetz:case C.tsrange:case C.tstzrange:return yt(e);default:return yt(e)}},yt=r=>r,ms=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},vs=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},gs=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},ys=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Cr(e,o))}return r},ps=r=>typeof r=="string"?r.replace(" ","T"):r,Er=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class nt{constructor(e,t,n={},s=Pr){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ht;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Ht||(Ht={}));class Oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oe.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=Oe.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Oe.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=i[u];if(d){const f=c.map(g=>g.presence_ref),m=d.map(g=>g.presence_ref),v=c.filter(g=>m.indexOf(g.presence_ref)<0),y=d.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(o[u]=v),y.length>0&&(l[u]=y)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const d=e[o].map(m=>m.presence_ref),f=c.filter(m=>d.indexOf(m.presence_ref)<0);e[o].unshift(...f)}n(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jt;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Jt||(Jt={}));var zt;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(zt||(zt={}));var V;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(V||(V={}));class Pt{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=F.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new nt(this,B.join,this.params,this.timeout),this.rejoinTimer=new Tr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=F.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=F.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this._on(B.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Oe(this),this.broadcastEndpointURL=Er(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(V.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(V.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){e==null||e(V.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,v=[];for(let y=0;y<m;y++){const g=f[y],{filter:{event:x,schema:w,table:P,filter:D}}=g,M=c&&c[y];if(M&&M.event===x&&M.schema===w&&M.table===P&&M.filter===D)v.push(Object.assign(Object.assign({},g),{id:M.id}));else{this.unsubscribe(),e==null||e(V.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(V.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(V.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(V.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=F.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(B.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new nt(this,B.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new nt(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=B;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,y,g;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(y=m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var v,y,g,x,w,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const D=m.id,M=(v=m.filter)===null||v===void 0?void 0:v.event;return D&&((y=t.ids)===null||y===void 0?void 0:y.includes(D))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const D=(w=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return D==="*"||D===((P=t==null?void 0:t.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:g,commit_timestamp:x,type:w,errors:P}=v;f=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:x,eventType:w,new:{},old:{},errors:P}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===F.closed}_isJoined(){return this.state===F.joined}_isJoining(){return this.state===F.joining}_isLeaving(){return this.state===F.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Pt.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(B.close,{},e)}_onError(e){this._on(B.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=F.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Yt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Yt(e.columns,e.old_record)),t}}const _s=()=>{},ws=typeof WebSocket<"u",bs=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ks{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cs,this.params={},this.timeout=Pr,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=_s,this.conn=null,this.sendBuffer=[],this.serializer=new hs,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>ge(async()=>{const{default:l}=await Promise.resolve().then(()=>_e);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${gt.websocket}`,this.httpEndpoint=Er(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Tr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ws){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new xs(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ge(async()=>{const{default:e}=await import("./browser-CJIyS0wL.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:us}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ve.connecting:return ie.Connecting;case ve.open:return ie.Open;case ve.closing:return ie.Closing;default:return ie.Closed}}isConnected(){return this.connectionState()===ie.Open}channel(e,t={config:{}}){const n=new Pt(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(B.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ds,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(B.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([bs],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class xs{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ve.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Tt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function N(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Ss extends Tt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pt extends Tt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var js=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};const Dr=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:n}=await Promise.resolve().then(()=>_e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Os=()=>js(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ge(()=>Promise.resolve().then(()=>_e),void 0)).Response:Response}),_t=r=>{if(Array.isArray(r))return r.map(t=>_t(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=_t(n)}),e};var oe=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};const st=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ps=(r,e,t)=>oe(void 0,void 0,void 0,function*(){const n=yield Os();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{e(new Ss(st(s),r.status||500))}).catch(s=>{e(new pt(st(s),s))}):e(new pt(st(r),r))}),Ts=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function De(r,e,t,n,s,i){return oe(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,Ts(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Ps(l,o,n))})})}function We(r,e,t,n){return oe(this,void 0,void 0,function*(){return De(r,"GET",e,t,n)})}function Z(r,e,t,n,s){return oe(this,void 0,void 0,function*(){return De(r,"POST",e,n,s,t)})}function Cs(r,e,t,n,s){return oe(this,void 0,void 0,function*(){return De(r,"PUT",e,n,s,t)})}function Es(r,e,t,n){return oe(this,void 0,void 0,function*(){return De(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Nr(r,e,t,n,s){return oe(this,void 0,void 0,function*(){return De(r,"DELETE",e,n,s,t)})}var $=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};const Ds={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ns{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Dr(s)}uploadOrUpdate(e,t,n,s){return $(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Gt),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(N(i))return{data:null,error:i};throw i}})}upload(e,t,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return $(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Gt.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(N(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return $(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Z(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Tt("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}update(e,t,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return $(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}})}copy(e,t,n){return $(this,void 0,void 0,function*(){try{return{data:{path:(yield Z(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return $(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Z(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return $(this,void 0,void 0,function*(){try{const s=yield Z(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}})}download(e,t){return $(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield We(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(N(o))return{data:null,error:o};throw o}})}info(e){return $(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield We(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_t(n),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}exists(e){return $(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Es(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(N(n)&&n instanceof pt){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return $(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}list(e,t,n){return $(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ds),t),{prefix:e||""});return{data:yield Z(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(N(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ms="2.7.1",As={"X-Client-Info":`storage-js/${Ms}`};var ue=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};class $s{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},As),t),this.fetch=Dr(n)}listBuckets(){return ue(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}getBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ue(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ue(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Z(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}}class Rs extends $s{constructor(e,t={},n){super(e,t,n)}from(e){return new Ns(this.url,this.headers,e,this.fetch)}}const Is="2.49.1";let je="";typeof Deno<"u"?je="deno":typeof document<"u"?je="web":typeof navigator<"u"&&navigator.product==="ReactNative"?je="react-native":je="node";const Ls={"X-Client-Info":`supabase-js-${je}/${Is}`},Fs={headers:Ls},Us={schema:"public"},Ws={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bs={};var qs=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};const Ys=r=>{let e;return r?e=r:typeof fetch>"u"?e=gr:e=fetch,(...t)=>e(...t)},Hs=()=>typeof Headers>"u"?yr:Headers,Js=(r,e,t)=>{const n=Ys(t),s=Hs();return(i,a)=>qs(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:r;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var zs=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};function Gs(r){return r.replace(/\/$/,"")}function Vs(r,e){const{db:t,auth:n,realtime:s,global:i}=r,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>zs(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const Mr="2.68.0",me=30*1e3,wt=3,it=wt*me,Ks="http://localhost:9999",Qs="supabase.auth.token",Xs={"X-Client-Info":`gotrue-js/${Mr}`},bt="X-Supabase-Api-Version",Ar={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Zs(r){return Math.round(Date.now()/1e3)+r}function ei(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const H=()=>typeof window<"u"&&typeof document<"u",re={tested:!1,writable:!1},Pe=()=>{if(!H())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(re.tested)return re.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),re.tested=!0,re.writable=!0}catch{re.tested=!0,re.writable=!1}return re.writable};function ti(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const $r=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ge(async()=>{const{default:n}=await Promise.resolve().then(()=>_e);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},ri=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Rr=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Re=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ie=async(r,e)=>{await r.removeItem(e)};function ni(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,i,a,o,l,u,c=0;for(r=r.replace("-","+").replace("_","/");c<r.length;)a=e.indexOf(r.charAt(c++)),o=e.indexOf(r.charAt(c++)),l=e.indexOf(r.charAt(c++)),u=e.indexOf(r.charAt(c++)),n=a<<2|o>>4,s=(o&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(n),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Qe{constructor(){this.promise=new Qe.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qe.promiseConstructor=Promise;function Vt(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(ni(n))}async function si(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function ii(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function ai(r){return("0"+r.toString(16)).substr(-2)}function oi(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,ai).join("")}async function li(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function ci(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ui(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await li(r);return ci(t)}async function de(r,e,t=!1){const n=oi();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Rr(r,`${e}-code-verifier`,s);const i=await ui(n);return[i,n===i?"plain":"s256"]}const di=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hi(r){const e=r.headers.get(bt);if(!e||!e.match(di))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ct extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function S(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class fi extends Ct{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function mi(r){return S(r)&&r.name==="AuthApiError"}class Ir extends Ct{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class le extends Ct{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Q extends le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vi(r){return S(r)&&r.name==="AuthSessionMissingError"}class at extends le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Le extends le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fe extends le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gi(r){return S(r)&&r.name==="AuthImplicitGrantRedirectError"}class Kt extends le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kt extends le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ot(r){return S(r)&&r.name==="AuthRetryableFetchError"}class Qt extends le{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var yi=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const ne=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),pi=[502,503,504];async function Xt(r){var e;if(!ri(r))throw new kt(ne(r),0);if(pi.includes(r.status))throw new kt(ne(r),r.status);let t;try{t=await r.json()}catch(i){throw new Ir(ne(i),i)}let n;const s=hi(r);if(s&&s.getTime()>=Ar["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Qt(ne(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Q}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Qt(ne(t),r.status,t.weak_password.reasons);throw new fi(ne(t),r.status||500,n)}const _i=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function j(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[bt]||(i[bt]=Ar["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await wi(r,e,t+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function wi(r,e,t,n,s,i){const a=_i(e,n,s,i);let o;try{o=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new kt(ne(l),0)}if(o.ok||await Xt(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Xt(l)}}function X(r){var e;let t=null;Si(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Zs(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Zt(r){const e=X(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ee(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function bi(r){return{data:r,error:null}}function ki(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,a=yi(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function xi(r){return r}function Si(r){return r.access_token&&r.refresh_token&&r.expires_in}var ji=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class Oi{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=$r(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await j(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(S(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await j(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ee})}catch(n){if(S(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ji(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ki,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(S(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await j(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ee})}catch(t){if(S(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:xi});if(c.error)throw c.error;const d=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(S(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await j(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ee})}catch(t){if(S(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await j(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ee})}catch(n){if(S(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await j(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ee})}catch(n){if(S(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await j(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(S(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await j(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(S(t))return{data:null,error:t};throw t}}}const Pi={getItem:r=>Pe()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Pe()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Pe()&&globalThis.localStorage.removeItem(r)}};function er(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Ti(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const he={debug:!!(globalThis&&Pe()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ci extends Lr{}async function Ei(r,e,t){he.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),he.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){he.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{he.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw he.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Ci(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(he.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Ti();const Di={url:Ks,storageKey:Qs,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xs,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tr(r,e,t){return await t()}class Te{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Te.nextInstanceID,Te.nextInstanceID+=1,this.instanceID>0&&H()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Di),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Oi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$r(s.fetch),this.lock=s.lock||tr,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:H()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ei:this.lock=tr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pe()?this.storage=Pi:(this.memoryStorage={},this.storage=er(this.memoryStorage)):(this.memoryStorage={},this.storage=er(this.memoryStorage)),H()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mr}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ti(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),H()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),gi(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return S(t)?{error:t}:{error:new Ir("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:X}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(S(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:c,password:d,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await de(this.storage,this.storageKey)),i=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:X})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:X})}else throw new Le("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(S(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zt})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zt})}else throw new Le("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new at}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Re(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:a}=await j(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:X});if(await Ie(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new at}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(S(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:a}=e,o=await j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:X}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new at}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await de(this.storage,this.storageKey));const{error:d}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Le("You must provide either an email or phone number.")}catch(o){if(S(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:X});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(S(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await de(this.storage,this.storageKey)),await j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:bi})}catch(i){if(S(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Q;const{error:s}=await j(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(S(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await j(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await j(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Le("You must provide either an email or phone number and a type")}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Re(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<it:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ee}):await this._useSession(async t=>{var n,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Q}:await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ee})})}catch(t){if(S(t))return vi(t)&&(await this._removeSession(),await Ie(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Q;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await de(this.storage,this.storageKey));const{data:u,error:c}=await j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:ee});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(S(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Vt(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Q;const t=Date.now()/1e3;let n=t,s=!0,i=null;const a=Vt(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(S(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Q;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(S(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!H())throw new Fe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Kt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kt("No code detected.");const{data:w,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new Fe("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(o);let f=c+d;l&&(f=parseInt(l));const m=f-c;m*1e3<=me&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const v=f-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:y,error:g}=await this._getUser(i);if(g)throw g;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(S(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Re(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(mi(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ie(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ei(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await de(this.storage,this.storageKey,!0));try{return await j(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(S(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(S(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:d,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await j(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return H()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(S(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)throw a;return await j(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await ii(async s=>(s>0&&await si(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:X})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ot(i)&&Date.now()+a-n<me})}catch(n){if(this._debug(t,"error",n),S(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),H()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Re(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<it;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${it}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),ot(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Q;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qe;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Q;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),S(i)){const a={session:null,error:i};return ot(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Rr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ie(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&H()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),me);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/me);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${me}ms, refresh threshold is ${wt} ticks`),s<=wt&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lr)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!H()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await de(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await j(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await j(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(S(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(S(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(S(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Te.nextInstanceID=0;const Ni=Te;class Mi extends Ni{constructor(e){super(e)}}var Ai=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((n=n.apply(r,e||[])).next())})};class $i{constructor(e,t,n){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Gs(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Us,realtime:Bs,auth:Object.assign(Object.assign({},Ws),{storageKey:l}),global:Fs},c=Vs(n??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=Js(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new os(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new In(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rs(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ai(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mi({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ks(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ri=(r,e,t)=>new $i(r,e,t),Ii="https://erjjrqjmoyqkyncauylt.supabase.co",Li="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyampycWptb3lxa3luY2F1eWx0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIwMzI5ODQsImV4cCI6MjA1NzYwODk4NH0.GPeOOwD17VSmaU7_DaRoPSmq_LycOmGg4gCEAcm2J28",te=Ri(Ii,Li);function Fi(){const[r,e]=k.useState(""),[t,n]=k.useState(""),[s,i]=k.useState(!1),a=yn(),o=async l=>{l.preventDefault(),i(!0);try{const{data:{user:u}}=await te.auth.getUser();if(!u){const{data:{user:m}}=await te.auth.signUp({email:`${crypto.randomUUID()}@temp.com`,password:crypto.randomUUID()});if(!m)throw new Error("Failed to create temporary user")}const{data:{user:c}}=await te.auth.getUser();if(!c)throw new Error("No user found");const{data:d,error:f}=await te.from("events").insert([{title:r,description:t,created_by:c.id}]).select().single();if(f)throw f;a(`/dashboard/${d.id}`)}catch(u){console.error("Error creating event:",u),alert("Failed to create event. Please try again.")}finally{i(!1)}};return h.jsxs("div",{className:"max-w-2xl mx-auto",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Create a New Event"}),h.jsxs("form",{onSubmit:o,className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Event Title"}),h.jsx("input",{type:"text",id:"title",value:r,onChange:l=>e(l.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),h.jsx("textarea",{id:"description",value:t,onChange:l=>n(l.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),h.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:s?"Creating...":"Create Event"})]})]})}function O(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function U(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function A(r,e){const t=O(r);return isNaN(e)?U(r,NaN):(e&&t.setDate(t.getDate()+e),t)}function q(r,e){const t=O(r);if(isNaN(e))return U(r,NaN);if(!e)return t;const n=t.getDate(),s=U(r,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return n>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),n),t)}const Et=6048e5,Ui=864e5;let Wi={};function Ne(){return Wi}function z(r,e){var o,l,u,c;const t=Ne(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=O(r),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function ae(r){return z(r,{weekStartsOn:1})}function Fr(r){const e=O(r),t=e.getFullYear(),n=U(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=ae(n),i=U(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=ae(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function pe(r){const e=O(r);return e.setHours(0,0,0,0),e}function Be(r){const e=O(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function J(r,e){const t=pe(r),n=pe(e),s=+t-Be(t),i=+n-Be(n);return Math.round((s-i)/Ui)}function Bi(r){const e=Fr(r),t=U(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ae(t)}function xt(r,e){const t=e*7;return A(r,t)}function qi(r,e){return q(r,e*12)}function Yi(r){let e;return r.forEach(function(t){const n=O(t);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function Hi(r){let e;return r.forEach(t=>{const n=O(t);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function I(r,e){const t=pe(r),n=pe(e);return+t==+n}function Dt(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ji(r){if(!Dt(r)&&typeof r!="number")return!1;const e=O(r);return!isNaN(Number(e))}function Ce(r,e){const t=O(r),n=O(e),s=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return s*12+i}function zi(r,e,t){const n=z(r,t),s=z(e,t),i=+n-Be(n),a=+s-Be(s);return Math.round((i-a)/Et)}function Nt(r){const e=O(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function L(r){const e=O(r);return e.setDate(1),e.setHours(0,0,0,0),e}function Ur(r){const e=O(r),t=U(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Mt(r,e){var o,l,u,c;const t=Ne(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=O(r),i=s.getDay(),a=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function Wr(r){return Mt(r,{weekStartsOn:1})}const Gi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Vi=(r,e,t)=>{let n;const s=Gi[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function lt(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Ki={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qi={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xi={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zi={date:lt({formats:Ki,defaultWidth:"full"}),time:lt({formats:Qi,defaultWidth:"full"}),dateTime:lt({formats:Xi,defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ta=(r,e,t,n)=>ea[r];function xe(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const ra={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},na={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sa={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ia={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},la=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},ca={ordinalNumber:la,era:xe({values:ra,defaultWidth:"wide"}),quarter:xe({values:na,defaultWidth:"wide",argumentCallback:r=>r-1}),month:xe({values:sa,defaultWidth:"wide"}),day:xe({values:ia,defaultWidth:"wide"}),dayPeriod:xe({values:aa,defaultWidth:"wide",formattingValues:oa,defaultFormattingWidth:"wide"})};function Se(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?da(o,d=>d.test(a)):ua(o,d=>d.test(a));let u;u=r.valueCallback?r.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const c=e.slice(a.length);return{value:u,rest:c}}}function ua(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function da(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function ha(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const fa=/^(\d+)(th|st|nd|rd)?/i,ma=/\d+/i,va={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ga={any:[/^b/i,/^(a|c)/i]},ya={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pa={any:[/1/i,/2/i,/3/i,/4/i]},_a={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wa={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ba={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ka={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xa={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sa={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ja={ordinalNumber:ha({matchPattern:fa,parsePattern:ma,valueCallback:r=>parseInt(r,10)}),era:Se({matchPatterns:va,defaultMatchWidth:"wide",parsePatterns:ga,defaultParseWidth:"any"}),quarter:Se({matchPatterns:ya,defaultMatchWidth:"wide",parsePatterns:pa,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Se({matchPatterns:_a,defaultMatchWidth:"wide",parsePatterns:wa,defaultParseWidth:"any"}),day:Se({matchPatterns:ba,defaultMatchWidth:"wide",parsePatterns:ka,defaultParseWidth:"any"}),dayPeriod:Se({matchPatterns:xa,defaultMatchWidth:"any",parsePatterns:Sa,defaultParseWidth:"any"})},Br={code:"en-US",formatDistance:Vi,formatLong:Zi,formatRelative:ta,localize:ca,match:ja,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Oa(r){const e=O(r);return J(e,Ur(e))+1}function qr(r){const e=O(r),t=+ae(e)-+Bi(e);return Math.round(t/Et)+1}function Yr(r,e){var c,d,f,m;const t=O(r),n=t.getFullYear(),s=Ne(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=U(r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=z(a,e),l=U(r,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=z(l,e);return t.getTime()>=o.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function Pa(r,e){var o,l,u,c;const t=Ne(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((c=(u=t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,s=Yr(r,e),i=U(r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),z(i,e)}function Hr(r,e){const t=O(r),n=+z(t,e)-+Pa(t,e);return Math.round(n/Et)+1}function T(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const K={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return T(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):T(t+1,2)},d(r,e){return T(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return T(r.getHours()%12||12,e.length)},H(r,e){return T(r.getHours(),e.length)},m(r,e){return T(r.getMinutes(),e.length)},s(r,e){return T(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return T(s,e.length)}},fe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rr={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return K.y(r,e)},Y:function(r,e,t,n){const s=Yr(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return T(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):T(i,e.length)},R:function(r,e){const t=Fr(r);return T(t,e.length)},u:function(r,e){const t=r.getFullYear();return T(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return T(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return T(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return K.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return T(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=Hr(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):T(s,e.length)},I:function(r,e,t){const n=qr(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):T(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):K.d(r,e)},D:function(r,e,t){const n=Oa(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):T(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return T(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return T(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return T(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=fe.noon:n===0?s=fe.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=fe.evening:n>=12?s=fe.afternoon:n>=4?s=fe.morning:s=fe.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return K.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):K.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):T(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):T(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):K.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):K.s(r,e)},S:function(r,e){return K.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return sr(n);case"XXXX":case"XX":return se(n);case"XXXXX":case"XXX":default:return se(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return sr(n);case"xxxx":case"xx":return se(n);case"xxxxx":case"xxx":default:return se(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nr(n,":");case"OOOO":default:return"GMT"+se(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nr(n,":");case"zzzz":default:return"GMT"+se(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return T(n,e.length)},T:function(r,e,t){const n=r.getTime();return T(n,e.length)}};function nr(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+T(i,2)}function sr(r,e){return r%60===0?(r>0?"-":"+")+T(Math.abs(r)/60,2):se(r,e)}function se(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=T(Math.trunc(n/60),2),i=T(n%60,2);return t+s+e+i}const ir=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Jr=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ta=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return ir(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ir(n,e)).replace("{{time}}",Jr(s,e))},Ca={p:Jr,P:Ta},Ea=/^D+$/,Da=/^Y+$/,Na=["D","DD","YY","YYYY"];function Ma(r){return Ea.test(r)}function Aa(r){return Da.test(r)}function $a(r,e,t){const n=Ra(r,e,t);if(console.warn(n),Na.includes(r))throw new RangeError(n)}function Ra(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ia=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,La=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fa=/^'([^]*?)'?$/,Ua=/''/g,Wa=/[a-zA-Z]/;function ce(r,e,t){var c,d,f,m,v,y,g,x;const n=Ne(),s=(t==null?void 0:t.locale)??n.locale??Br,i=(t==null?void 0:t.firstWeekContainsDate)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((y=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((x=(g=n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,o=O(r);if(!Ji(o))throw new RangeError("Invalid time value");let l=e.match(La).map(w=>{const P=w[0];if(P==="p"||P==="P"){const D=Ca[P];return D(w,s.formatLong)}return w}).join("").match(Ia).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const P=w[0];if(P==="'")return{isToken:!1,value:Ba(w)};if(rr[P])return{isToken:!0,value:w};if(P.match(Wa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(w=>{if(!w.isToken)return w.value;const P=w.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Aa(P)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Ma(P))&&$a(P,e,String(r));const D=rr[P[0]];return D(o,P,s.localize,u)}).join("")}function Ba(r){const e=r.match(Fa);return e?e[1].replace(Ua,"'"):r}function qa(r){const e=O(r),t=e.getFullYear(),n=e.getMonth(),s=U(r,0);return s.setFullYear(t,n+1,0),s.setHours(0,0,0,0),s.getDate()}function Ya(r){return Math.trunc(+O(r)/1e3)}function Ha(r){const e=O(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function Ja(r,e){return zi(Ha(r),L(r),e)+1}function St(r,e){const t=O(r),n=O(e);return t.getTime()>n.getTime()}function zr(r,e){const t=O(r),n=O(e);return+t<+n}function At(r,e){const t=O(r),n=O(e);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()}function za(r,e){const t=O(r),n=O(e);return t.getFullYear()===n.getFullYear()}function ct(r,e){return A(r,-e)}function ut(r,e){const t=O(r),n=t.getFullYear(),s=t.getDate(),i=U(r,0);i.setFullYear(n,e,15),i.setHours(0,0,0,0);const a=qa(i);return t.setMonth(e,Math.min(s,a)),t}function ar(r,e){const t=O(r);return isNaN(+t)?U(r,NaN):(t.setFullYear(e),t)}var _=function(){return _=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_.apply(this,arguments)};function Ga(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function Gr(r,e,t){for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}function Me(r){return r.mode==="multiple"}function Ae(r){return r.mode==="range"}function Xe(r){return r.mode==="single"}var Va={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ka(r,e){return ce(r,"LLLL y",e)}function Qa(r,e){return ce(r,"d",e)}function Xa(r,e){return ce(r,"LLLL",e)}function Za(r){return"".concat(r)}function eo(r,e){return ce(r,"cccccc",e)}function to(r,e){return ce(r,"yyyy",e)}var ro=Object.freeze({__proto__:null,formatCaption:Ka,formatDay:Qa,formatMonthCaption:Xa,formatWeekNumber:Za,formatWeekdayName:eo,formatYearCaption:to}),no=function(r,e,t){return ce(r,"do MMMM (EEEE)",t)},so=function(){return"Month: "},io=function(){return"Go to next month"},ao=function(){return"Go to previous month"},oo=function(r,e){return ce(r,"cccc",e)},lo=function(r){return"Week n. ".concat(r)},co=function(){return"Year: "},uo=Object.freeze({__proto__:null,labelDay:no,labelMonthDropdown:so,labelNext:io,labelPrevious:ao,labelWeekNumber:lo,labelWeekday:oo,labelYearDropdown:co});function ho(){var r="buttons",e=Va,t=Br,n={},s={},i=1,a={},o=new Date;return{captionLayout:r,classNames:e,formatters:ro,labels:uo,locale:t,modifiersClassNames:n,modifiers:s,numberOfMonths:i,styles:a,today:o,mode:"default"}}function fo(r){var e=r.fromYear,t=r.toYear,n=r.fromMonth,s=r.toMonth,i=r.fromDate,a=r.toDate;return n?i=L(n):e&&(i=new Date(e,0,1)),s?a=Nt(s):t&&(a=new Date(t,11,31)),{fromDate:i?pe(i):void 0,toDate:a?pe(a):void 0}}var Vr=k.createContext(void 0);function mo(r){var e,t=r.initialProps,n=ho(),s=fo(t),i=s.fromDate,a=s.toDate,o=(e=t.captionLayout)!==null&&e!==void 0?e:n.captionLayout;o!=="buttons"&&(!i||!a)&&(o="buttons");var l;(Xe(t)||Me(t)||Ae(t))&&(l=t.onSelect);var u=_(_(_({},n),t),{captionLayout:o,classNames:_(_({},n.classNames),t.classNames),components:_({},t.components),formatters:_(_({},n.formatters),t.formatters),fromDate:i,labels:_(_({},n.labels),t.labels),mode:t.mode||n.mode,modifiers:_(_({},n.modifiers),t.modifiers),modifiersClassNames:_(_({},n.modifiersClassNames),t.modifiersClassNames),onSelect:l,styles:_(_({},n.styles),t.styles),toDate:a});return h.jsx(Vr.Provider,{value:u,children:r.children})}function E(){var r=k.useContext(Vr);if(!r)throw new Error("useDayPicker must be used within a DayPickerProvider.");return r}function Kr(r){var e=E(),t=e.locale,n=e.classNames,s=e.styles,i=e.formatters.formatCaption;return h.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:r.id,children:i(r.displayMonth,{locale:t})})}function vo(r){return h.jsx("svg",_({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},r,{children:h.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Qr(r){var e,t,n=r.onChange,s=r.value,i=r.children,a=r.caption,o=r.className,l=r.style,u=E(),c=(t=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:vo;return h.jsxs("div",{className:o,style:l,children:[h.jsx("span",{className:u.classNames.vhidden,children:r["aria-label"]}),h.jsx("select",{name:r.name,"aria-label":r["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:i}),h.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,h.jsx(c,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function go(r){var e,t=E(),n=t.fromDate,s=t.toDate,i=t.styles,a=t.locale,o=t.formatters.formatMonthCaption,l=t.classNames,u=t.components,c=t.labels.labelMonthDropdown;if(!n)return h.jsx(h.Fragment,{});if(!s)return h.jsx(h.Fragment,{});var d=[];if(za(n,s))for(var f=L(n),m=n.getMonth();m<=s.getMonth();m++)d.push(ut(f,m));else for(var f=L(new Date),m=0;m<=11;m++)d.push(ut(f,m));var v=function(g){var x=Number(g.target.value),w=ut(L(r.displayMonth),x);r.onChange(w)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Qr;return h.jsx(y,{name:"months","aria-label":c(),className:l.dropdown_month,style:i.dropdown_month,onChange:v,value:r.displayMonth.getMonth(),caption:o(r.displayMonth,{locale:a}),children:d.map(function(g){return h.jsx("option",{value:g.getMonth(),children:o(g,{locale:a})},g.getMonth())})})}function yo(r){var e,t=r.displayMonth,n=E(),s=n.fromDate,i=n.toDate,a=n.locale,o=n.styles,l=n.classNames,u=n.components,c=n.formatters.formatYearCaption,d=n.labels.labelYearDropdown,f=[];if(!s)return h.jsx(h.Fragment,{});if(!i)return h.jsx(h.Fragment,{});for(var m=s.getFullYear(),v=i.getFullYear(),y=m;y<=v;y++)f.push(ar(Ur(new Date),y));var g=function(w){var P=ar(L(t),Number(w.target.value));r.onChange(P)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:Qr;return h.jsx(x,{name:"years","aria-label":d(),className:l.dropdown_year,style:o.dropdown_year,onChange:g,value:t.getFullYear(),caption:c(t,{locale:a}),children:f.map(function(w){return h.jsx("option",{value:w.getFullYear(),children:c(w,{locale:a})},w.getFullYear())})})}function po(r,e){var t=k.useState(r),n=t[0],s=t[1],i=e===void 0?n:e;return[i,s]}function _o(r){var e=r.month,t=r.defaultMonth,n=r.today,s=e||t||n||new Date,i=r.toDate,a=r.fromDate,o=r.numberOfMonths,l=o===void 0?1:o;if(i&&Ce(i,s)<0){var u=-1*(l-1);s=q(i,u)}return a&&Ce(s,a)<0&&(s=a),L(s)}function wo(){var r=E(),e=_o(r),t=po(e,r.month),n=t[0],s=t[1],i=function(a){var o;if(!r.disableNavigation){var l=L(a);s(l),(o=r.onMonthChange)===null||o===void 0||o.call(r,l)}};return[n,i]}function bo(r,e){for(var t=e.reverseMonths,n=e.numberOfMonths,s=L(r),i=L(q(s,n)),a=Ce(i,s),o=[],l=0;l<a;l++){var u=q(s,l);o.push(u)}return t&&(o=o.reverse()),o}function ko(r,e){if(!e.disableNavigation){var t=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=n?i:1,o=L(r);if(!t)return q(o,a);var l=Ce(t,r);if(!(l<i))return q(o,a)}}function xo(r,e){if(!e.disableNavigation){var t=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=n?i:1,o=L(r);if(!t)return q(o,-a);var l=Ce(o,t);if(!(l<=0))return q(o,-a)}}var Xr=k.createContext(void 0);function So(r){var e=E(),t=wo(),n=t[0],s=t[1],i=bo(n,e),a=ko(n,e),o=xo(n,e),l=function(d){return i.some(function(f){return At(d,f)})},u=function(d,f){l(d)||(f&&zr(d,f)?s(q(d,1+e.numberOfMonths*-1)):s(d))},c={currentMonth:n,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:o,nextMonth:a,isDateDisplayed:l};return h.jsx(Xr.Provider,{value:c,children:r.children})}function $e(){var r=k.useContext(Xr);if(!r)throw new Error("useNavigation must be used within a NavigationProvider");return r}function or(r){var e,t=E(),n=t.classNames,s=t.styles,i=t.components,a=$e().goToMonth,o=function(c){a(q(c,r.displayIndex?-r.displayIndex:0))},l=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:Kr,u=h.jsx(l,{id:r.id,displayMonth:r.displayMonth});return h.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[h.jsx("div",{className:n.vhidden,children:u}),h.jsx(go,{onChange:o,displayMonth:r.displayMonth}),h.jsx(yo,{onChange:o,displayMonth:r.displayMonth})]})}function jo(r){return h.jsx("svg",_({width:"16px",height:"16px",viewBox:"0 0 120 120"},r,{children:h.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Oo(r){return h.jsx("svg",_({width:"16px",height:"16px",viewBox:"0 0 120 120"},r,{children:h.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var qe=k.forwardRef(function(r,e){var t=E(),n=t.classNames,s=t.styles,i=[n.button_reset,n.button];r.className&&i.push(r.className);var a=i.join(" "),o=_(_({},s.button_reset),s.button);return r.style&&Object.assign(o,r.style),h.jsx("button",_({},r,{ref:e,type:"button",className:a,style:o}))});function Po(r){var e,t,n=E(),s=n.dir,i=n.locale,a=n.classNames,o=n.styles,l=n.labels,u=l.labelPrevious,c=l.labelNext,d=n.components;if(!r.nextMonth&&!r.previousMonth)return h.jsx(h.Fragment,{});var f=u(r.previousMonth,{locale:i}),m=[a.nav_button,a.nav_button_previous].join(" "),v=c(r.nextMonth,{locale:i}),y=[a.nav_button,a.nav_button_next].join(" "),g=(e=d==null?void 0:d.IconRight)!==null&&e!==void 0?e:Oo,x=(t=d==null?void 0:d.IconLeft)!==null&&t!==void 0?t:jo;return h.jsxs("div",{className:a.nav,style:o.nav,children:[!r.hidePrevious&&h.jsx(qe,{name:"previous-month","aria-label":f,className:m,style:o.nav_button_previous,disabled:!r.previousMonth,onClick:r.onPreviousClick,children:s==="rtl"?h.jsx(g,{className:a.nav_icon,style:o.nav_icon}):h.jsx(x,{className:a.nav_icon,style:o.nav_icon})}),!r.hideNext&&h.jsx(qe,{name:"next-month","aria-label":v,className:y,style:o.nav_button_next,disabled:!r.nextMonth,onClick:r.onNextClick,children:s==="rtl"?h.jsx(x,{className:a.nav_icon,style:o.nav_icon}):h.jsx(g,{className:a.nav_icon,style:o.nav_icon})})]})}function lr(r){var e=E().numberOfMonths,t=$e(),n=t.previousMonth,s=t.nextMonth,i=t.goToMonth,a=t.displayMonths,o=a.findIndex(function(v){return At(r.displayMonth,v)}),l=o===0,u=o===a.length-1,c=e>1&&(l||!u),d=e>1&&(u||!l),f=function(){n&&i(n)},m=function(){s&&i(s)};return h.jsx(Po,{displayMonth:r.displayMonth,hideNext:c,hidePrevious:d,nextMonth:s,previousMonth:n,onPreviousClick:f,onNextClick:m})}function To(r){var e,t=E(),n=t.classNames,s=t.disableNavigation,i=t.styles,a=t.captionLayout,o=t.components,l=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:Kr,u;return s?u=h.jsx(l,{id:r.id,displayMonth:r.displayMonth}):a==="dropdown"?u=h.jsx(or,{displayMonth:r.displayMonth,id:r.id}):a==="dropdown-buttons"?u=h.jsxs(h.Fragment,{children:[h.jsx(or,{displayMonth:r.displayMonth,displayIndex:r.displayIndex,id:r.id}),h.jsx(lr,{displayMonth:r.displayMonth,displayIndex:r.displayIndex,id:r.id})]}):u=h.jsxs(h.Fragment,{children:[h.jsx(l,{id:r.id,displayMonth:r.displayMonth,displayIndex:r.displayIndex}),h.jsx(lr,{displayMonth:r.displayMonth,id:r.id})]}),h.jsx("div",{className:n.caption,style:i.caption,children:u})}function Co(r){var e=E(),t=e.footer,n=e.styles,s=e.classNames.tfoot;return t?h.jsx("tfoot",{className:s,style:n.tfoot,children:h.jsx("tr",{children:h.jsx("td",{colSpan:8,children:t})})}):h.jsx(h.Fragment,{})}function Eo(r,e,t){for(var n=t?ae(new Date):z(new Date,{locale:r,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=A(n,i);s.push(a)}return s}function Do(){var r=E(),e=r.classNames,t=r.styles,n=r.showWeekNumber,s=r.locale,i=r.weekStartsOn,a=r.ISOWeek,o=r.formatters.formatWeekdayName,l=r.labels.labelWeekday,u=Eo(s,i,a);return h.jsxs("tr",{style:t.head_row,className:e.head_row,children:[n&&h.jsx("td",{style:t.head_cell,className:e.head_cell}),u.map(function(c,d){return h.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":l(c,{locale:s}),children:o(c,{locale:s})},d)})]})}function No(){var r,e=E(),t=e.classNames,n=e.styles,s=e.components,i=(r=s==null?void 0:s.HeadRow)!==null&&r!==void 0?r:Do;return h.jsx("thead",{style:n.head,className:t.head,children:h.jsx(i,{})})}function Mo(r){var e=E(),t=e.locale,n=e.formatters.formatDay;return h.jsx(h.Fragment,{children:n(r.date,{locale:t})})}var $t=k.createContext(void 0);function Ao(r){if(!Me(r.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return h.jsx($t.Provider,{value:e,children:r.children})}return h.jsx($o,{initialProps:r.initialProps,children:r.children})}function $o(r){var e=r.initialProps,t=r.children,n=e.selected,s=e.min,i=e.max,a=function(u,c,d){var f,m;(f=e.onDayClick)===null||f===void 0||f.call(e,u,c,d);var v=!!(c.selected&&s&&(n==null?void 0:n.length)===s);if(!v){var y=!!(!c.selected&&i&&(n==null?void 0:n.length)===i);if(!y){var g=n?Gr([],n):[];if(c.selected){var x=g.findIndex(function(w){return I(u,w)});g.splice(x,1)}else g.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,g,u,c,d)}}},o={disabled:[]};n&&o.disabled.push(function(u){var c=i&&n.length>i-1,d=n.some(function(f){return I(f,u)});return!!(c&&!d)});var l={selected:n,onDayClick:a,modifiers:o};return h.jsx($t.Provider,{value:l,children:t})}function Rt(){var r=k.useContext($t);if(!r)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return r}function Ro(r,e){var t=e||{},n=t.from,s=t.to;return n&&s?I(s,r)&&I(n,r)?void 0:I(s,r)?{from:s,to:void 0}:I(n,r)?void 0:St(n,r)?{from:r,to:s}:{from:n,to:r}:s?St(r,s)?{from:s,to:r}:{from:r,to:s}:n?zr(r,n)?{from:r,to:n}:{from:n,to:r}:{from:r,to:void 0}}var It=k.createContext(void 0);function Io(r){if(!Ae(r.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return h.jsx(It.Provider,{value:e,children:r.children})}return h.jsx(Lo,{initialProps:r.initialProps,children:r.children})}function Lo(r){var e=r.initialProps,t=r.children,n=e.selected,s=n||{},i=s.from,a=s.to,o=e.min,l=e.max,u=function(m,v,y){var g,x;(g=e.onDayClick)===null||g===void 0||g.call(e,m,v,y);var w=Ro(m,n);(x=e.onSelect)===null||x===void 0||x.call(e,w,m,v,y)},c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(c.range_start=[i],a?(c.range_end=[a],I(i,a)||(c.range_middle=[{after:i,before:a}])):c.range_end=[i]):a&&(c.range_start=[a],c.range_end=[a]),o&&(i&&!a&&c.disabled.push({after:ct(i,o-1),before:A(i,o-1)}),i&&a&&c.disabled.push({after:i,before:A(i,o-1)}),!i&&a&&c.disabled.push({after:ct(a,o-1),before:A(a,o-1)})),l){if(i&&!a&&(c.disabled.push({before:A(i,-l+1)}),c.disabled.push({after:A(i,l-1)})),i&&a){var d=J(a,i)+1,f=l-d;c.disabled.push({before:ct(i,f)}),c.disabled.push({after:A(a,f)})}!i&&a&&(c.disabled.push({before:A(a,-l+1)}),c.disabled.push({after:A(a,l-1)}))}return h.jsx(It.Provider,{value:{selected:n,onDayClick:u,modifiers:c},children:t})}function Lt(){var r=k.useContext(It);if(!r)throw new Error("useSelectRange must be used within a SelectRangeProvider");return r}function Ue(r){return Array.isArray(r)?Gr([],r):r!==void 0?[r]:[]}function Fo(r){var e={};return Object.entries(r).forEach(function(t){var n=t[0],s=t[1];e[n]=Ue(s)}),e}var Y;(function(r){r.Outside="outside",r.Disabled="disabled",r.Selected="selected",r.Hidden="hidden",r.Today="today",r.RangeStart="range_start",r.RangeEnd="range_end",r.RangeMiddle="range_middle"})(Y||(Y={}));var Uo=Y.Selected,G=Y.Disabled,Wo=Y.Hidden,Bo=Y.Today,dt=Y.RangeEnd,ht=Y.RangeMiddle,ft=Y.RangeStart,qo=Y.Outside;function Yo(r,e,t){var n,s=(n={},n[Uo]=Ue(r.selected),n[G]=Ue(r.disabled),n[Wo]=Ue(r.hidden),n[Bo]=[r.today],n[dt]=[],n[ht]=[],n[ft]=[],n[qo]=[],n);return r.fromDate&&s[G].push({before:r.fromDate}),r.toDate&&s[G].push({after:r.toDate}),Me(r)?s[G]=s[G].concat(e.modifiers[G]):Ae(r)&&(s[G]=s[G].concat(t.modifiers[G]),s[ft]=t.modifiers[ft],s[ht]=t.modifiers[ht],s[dt]=t.modifiers[dt]),s}var Zr=k.createContext(void 0);function Ho(r){var e=E(),t=Rt(),n=Lt(),s=Yo(e,t,n),i=Fo(e.modifiers),a=_(_({},s),i);return h.jsx(Zr.Provider,{value:a,children:r.children})}function en(){var r=k.useContext(Zr);if(!r)throw new Error("useModifiers must be used within a ModifiersProvider");return r}function Jo(r){return!!(r&&typeof r=="object"&&"before"in r&&"after"in r)}function zo(r){return!!(r&&typeof r=="object"&&"from"in r)}function Go(r){return!!(r&&typeof r=="object"&&"after"in r)}function Vo(r){return!!(r&&typeof r=="object"&&"before"in r)}function Ko(r){return!!(r&&typeof r=="object"&&"dayOfWeek"in r)}function Qo(r,e){var t,n=e.from,s=e.to;if(n&&s){var i=J(s,n)<0;i&&(t=[s,n],n=t[0],s=t[1]);var a=J(r,n)>=0&&J(s,r)>=0;return a}return s?I(s,r):n?I(n,r):!1}function Xo(r){return Dt(r)}function Zo(r){return Array.isArray(r)&&r.every(Dt)}function el(r,e){return e.some(function(t){if(typeof t=="boolean")return t;if(Xo(t))return I(r,t);if(Zo(t))return t.includes(r);if(zo(t))return Qo(r,t);if(Ko(t))return t.dayOfWeek.includes(r.getDay());if(Jo(t)){var n=J(t.before,r),s=J(t.after,r),i=n>0,a=s<0,o=St(t.before,t.after);return o?a&&i:i||a}return Go(t)?J(r,t.after)>0:Vo(t)?J(t.before,r)>0:typeof t=="function"?t(r):!1})}function Ft(r,e,t){var n=Object.keys(e).reduce(function(i,a){var o=e[a];return el(r,o)&&i.push(a),i},[]),s={};return n.forEach(function(i){return s[i]=!0}),t&&!At(r,t)&&(s.outside=!0),s}function tl(r,e){for(var t=L(r[0]),n=Nt(r[r.length-1]),s,i,a=t;a<=n;){var o=Ft(a,e),l=!o.disabled&&!o.hidden;if(!l){a=A(a,1);continue}if(o.selected)return a;o.today&&!i&&(i=a),s||(s=a),a=A(a,1)}return i||s}var rl=365;function tn(r,e){var t=e.moveBy,n=e.direction,s=e.context,i=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:r}:a,l=s.weekStartsOn,u=s.fromDate,c=s.toDate,d=s.locale,f={day:A,week:xt,month:q,year:qi,startOfWeek:function(g){return s.ISOWeek?ae(g):z(g,{locale:d,weekStartsOn:l})},endOfWeek:function(g){return s.ISOWeek?Wr(g):Mt(g,{locale:d,weekStartsOn:l})}},m=f[t](r,n==="after"?1:-1);n==="before"&&u?m=Yi([u,m]):n==="after"&&c&&(m=Hi([c,m]));var v=!0;if(i){var y=Ft(m,i);v=!y.disabled&&!y.hidden}return v?m:o.count>rl?o.lastFocused:tn(m,{moveBy:t,direction:n,context:s,modifiers:i,retry:_(_({},o),{count:o.count+1})})}var rn=k.createContext(void 0);function nl(r){var e=$e(),t=en(),n=k.useState(),s=n[0],i=n[1],a=k.useState(),o=a[0],l=a[1],u=tl(e.displayMonths,t),c=s??(o&&e.isDateDisplayed(o))?o:u,d=function(){l(s),i(void 0)},f=function(g){i(g)},m=E(),v=function(g,x){if(s){var w=tn(s,{moveBy:g,direction:x,context:m,modifiers:t});I(s,w)||(e.goToDate(w,s),f(w))}},y={focusedDay:s,focusTarget:c,blur:d,focus:f,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return h.jsx(rn.Provider,{value:y,children:r.children})}function Ut(){var r=k.useContext(rn);if(!r)throw new Error("useFocusContext must be used within a FocusProvider");return r}function sl(r,e){var t=en(),n=Ft(r,t,e);return n}var Wt=k.createContext(void 0);function il(r){if(!Xe(r.initialProps)){var e={selected:void 0};return h.jsx(Wt.Provider,{value:e,children:r.children})}return h.jsx(al,{initialProps:r.initialProps,children:r.children})}function al(r){var e=r.initialProps,t=r.children,n=function(i,a,o){var l,u,c;if((l=e.onDayClick)===null||l===void 0||l.call(e,i,a,o),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,a,o);return}(c=e.onSelect)===null||c===void 0||c.call(e,i,i,a,o)},s={selected:e.selected,onDayClick:n};return h.jsx(Wt.Provider,{value:s,children:t})}function nn(){var r=k.useContext(Wt);if(!r)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return r}function ol(r,e){var t=E(),n=nn(),s=Rt(),i=Lt(),a=Ut(),o=a.focusDayAfter,l=a.focusDayBefore,u=a.focusWeekAfter,c=a.focusWeekBefore,d=a.blur,f=a.focus,m=a.focusMonthBefore,v=a.focusMonthAfter,y=a.focusYearBefore,g=a.focusYearAfter,x=a.focusStartOfWeek,w=a.focusEndOfWeek,P=function(b){var p,Ze,et,tt;Xe(t)?(p=n.onDayClick)===null||p===void 0||p.call(n,r,e,b):Me(t)?(Ze=s.onDayClick)===null||Ze===void 0||Ze.call(s,r,e,b):Ae(t)?(et=i.onDayClick)===null||et===void 0||et.call(i,r,e,b):(tt=t.onDayClick)===null||tt===void 0||tt.call(t,r,e,b)},D=function(b){var p;f(r),(p=t.onDayFocus)===null||p===void 0||p.call(t,r,e,b)},M=function(b){var p;d(),(p=t.onDayBlur)===null||p===void 0||p.call(t,r,e,b)},be=function(b){var p;(p=t.onDayMouseEnter)===null||p===void 0||p.call(t,r,e,b)},sn=function(b){var p;(p=t.onDayMouseLeave)===null||p===void 0||p.call(t,r,e,b)},an=function(b){var p;(p=t.onDayPointerEnter)===null||p===void 0||p.call(t,r,e,b)},on=function(b){var p;(p=t.onDayPointerLeave)===null||p===void 0||p.call(t,r,e,b)},ln=function(b){var p;(p=t.onDayTouchCancel)===null||p===void 0||p.call(t,r,e,b)},cn=function(b){var p;(p=t.onDayTouchEnd)===null||p===void 0||p.call(t,r,e,b)},un=function(b){var p;(p=t.onDayTouchMove)===null||p===void 0||p.call(t,r,e,b)},dn=function(b){var p;(p=t.onDayTouchStart)===null||p===void 0||p.call(t,r,e,b)},hn=function(b){var p;(p=t.onDayKeyUp)===null||p===void 0||p.call(t,r,e,b)},fn=function(b){var p;switch(b.key){case"ArrowLeft":b.preventDefault(),b.stopPropagation(),t.dir==="rtl"?o():l();break;case"ArrowRight":b.preventDefault(),b.stopPropagation(),t.dir==="rtl"?l():o();break;case"ArrowDown":b.preventDefault(),b.stopPropagation(),u();break;case"ArrowUp":b.preventDefault(),b.stopPropagation(),c();break;case"PageUp":b.preventDefault(),b.stopPropagation(),b.shiftKey?y():m();break;case"PageDown":b.preventDefault(),b.stopPropagation(),b.shiftKey?g():v();break;case"Home":b.preventDefault(),b.stopPropagation(),x();break;case"End":b.preventDefault(),b.stopPropagation(),w();break}(p=t.onDayKeyDown)===null||p===void 0||p.call(t,r,e,b)},mn={onClick:P,onFocus:D,onBlur:M,onKeyDown:fn,onKeyUp:hn,onMouseEnter:be,onMouseLeave:sn,onPointerEnter:an,onPointerLeave:on,onTouchCancel:ln,onTouchEnd:cn,onTouchMove:un,onTouchStart:dn};return mn}function ll(){var r=E(),e=nn(),t=Rt(),n=Lt(),s=Xe(r)?e.selected:Me(r)?t.selected:Ae(r)?n.selected:void 0;return s}function cl(r){return Object.values(Y).includes(r)}function ul(r,e){var t=[r.classNames.day];return Object.keys(e).forEach(function(n){var s=r.modifiersClassNames[n];if(s)t.push(s);else if(cl(n)){var i=r.classNames["day_".concat(n)];i&&t.push(i)}}),t}function dl(r,e){var t=_({},r.styles.day);return Object.keys(e).forEach(function(n){var s;t=_(_({},t),(s=r.modifiersStyles)===null||s===void 0?void 0:s[n])}),t}function hl(r,e,t){var n,s,i,a=E(),o=Ut(),l=sl(r,e),u=ol(r,l),c=ll(),d=!!(a.onDayClick||a.mode!=="default");k.useEffect(function(){var be;l.outside||o.focusedDay&&d&&I(o.focusedDay,r)&&((be=t.current)===null||be===void 0||be.focus())},[o.focusedDay,r,t,d,l.outside]);var f=ul(a,l).join(" "),m=dl(a,l),v=!!(l.outside&&!a.showOutsideDays||l.hidden),y=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:Mo,g=h.jsx(y,{date:r,displayMonth:e,activeModifiers:l}),x={style:m,className:f,children:g,role:"gridcell"},w=o.focusTarget&&I(o.focusTarget,r)&&!l.outside,P=o.focusedDay&&I(o.focusedDay,r),D=_(_(_({},x),(n={disabled:l.disabled,role:"gridcell"},n["aria-selected"]=l.selected,n.tabIndex=P||w?0:-1,n)),u),M={isButton:d,isHidden:v,activeModifiers:l,selectedDays:c,buttonProps:D,divProps:x};return M}function fl(r){var e=k.useRef(null),t=hl(r.date,r.displayMonth,e);return t.isHidden?h.jsx("div",{role:"gridcell"}):t.isButton?h.jsx(qe,_({name:"day",ref:e},t.buttonProps)):h.jsx("div",_({},t.divProps))}function ml(r){var e=r.number,t=r.dates,n=E(),s=n.onWeekNumberClick,i=n.styles,a=n.classNames,o=n.locale,l=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,c=u(Number(e),{locale:o});if(!s)return h.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:c});var d=l(Number(e),{locale:o}),f=function(m){s(e,t,m)};return h.jsx(qe,{name:"week-number","aria-label":d,className:a.weeknumber,style:i.weeknumber,onClick:f,children:c})}function vl(r){var e,t,n=E(),s=n.styles,i=n.classNames,a=n.showWeekNumber,o=n.components,l=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:fl,u=(t=o==null?void 0:o.WeekNumber)!==null&&t!==void 0?t:ml,c;return a&&(c=h.jsx("td",{className:i.cell,style:s.cell,children:h.jsx(u,{number:r.weekNumber,dates:r.dates})})),h.jsxs("tr",{className:i.row,style:s.row,children:[c,r.dates.map(function(d){return h.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:h.jsx(l,{displayMonth:r.displayMonth,date:d})},Ya(d))})]})}function cr(r,e,t){for(var n=t!=null&&t.ISOWeek?Wr(e):Mt(e,t),s=t!=null&&t.ISOWeek?ae(r):z(r,t),i=J(n,s),a=[],o=0;o<=i;o++)a.push(A(s,o));var l=a.reduce(function(u,c){var d=t!=null&&t.ISOWeek?qr(c):Hr(c,t),f=u.find(function(m){return m.weekNumber===d});return f?(f.dates.push(c),u):(u.push({weekNumber:d,dates:[c]}),u)},[]);return l}function gl(r,e){var t=cr(L(r),Nt(r),e);if(e!=null&&e.useFixedWeeks){var n=Ja(r,e);if(n<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],a=xt(i,6-n),o=cr(xt(i,1),a,e);t.push.apply(t,o)}}return t}function yl(r){var e,t,n,s=E(),i=s.locale,a=s.classNames,o=s.styles,l=s.hideHead,u=s.fixedWeeks,c=s.components,d=s.weekStartsOn,f=s.firstWeekContainsDate,m=s.ISOWeek,v=gl(r.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:d,firstWeekContainsDate:f}),y=(e=c==null?void 0:c.Head)!==null&&e!==void 0?e:No,g=(t=c==null?void 0:c.Row)!==null&&t!==void 0?t:vl,x=(n=c==null?void 0:c.Footer)!==null&&n!==void 0?n:Co;return h.jsxs("table",{id:r.id,className:a.table,style:o.table,role:"grid","aria-labelledby":r["aria-labelledby"],children:[!l&&h.jsx(y,{}),h.jsx("tbody",{className:a.tbody,style:o.tbody,children:v.map(function(w){return h.jsx(g,{displayMonth:r.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),h.jsx(x,{displayMonth:r.displayMonth})]})}function pl(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _l=pl()?k.useLayoutEffect:k.useEffect,mt=!1,wl=0;function ur(){return"react-day-picker-".concat(++wl)}function bl(r){var e,t=r??(mt?ur():null),n=k.useState(t),s=n[0],i=n[1];return _l(function(){s===null&&i(ur())},[]),k.useEffect(function(){mt===!1&&(mt=!0)},[]),(e=r??s)!==null&&e!==void 0?e:void 0}function kl(r){var e,t,n=E(),s=n.dir,i=n.classNames,a=n.styles,o=n.components,l=$e().displayMonths,u=bl(n.id?"".concat(n.id,"-").concat(r.displayIndex):void 0),c=n.id?"".concat(n.id,"-grid-").concat(r.displayIndex):void 0,d=[i.month],f=a.month,m=r.displayIndex===0,v=r.displayIndex===l.length-1,y=!m&&!v;s==="rtl"&&(e=[m,v],v=e[0],m=e[1]),m&&(d.push(i.caption_start),f=_(_({},f),a.caption_start)),v&&(d.push(i.caption_end),f=_(_({},f),a.caption_end)),y&&(d.push(i.caption_between),f=_(_({},f),a.caption_between));var g=(t=o==null?void 0:o.Caption)!==null&&t!==void 0?t:To;return h.jsxs("div",{className:d.join(" "),style:f,children:[h.jsx(g,{id:u,displayMonth:r.displayMonth,displayIndex:r.displayIndex}),h.jsx(yl,{id:c,"aria-labelledby":u,displayMonth:r.displayMonth})]},r.displayIndex)}function xl(r){var e=E(),t=e.classNames,n=e.styles;return h.jsx("div",{className:t.months,style:n.months,children:r.children})}function Sl(r){var e,t,n=r.initialProps,s=E(),i=Ut(),a=$e(),o=k.useState(!1),l=o[0],u=o[1];k.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var c=[s.classNames.root,s.className];s.numberOfMonths>1&&c.push(s.classNames.multiple_months),s.showWeekNumber&&c.push(s.classNames.with_weeknumber);var d=_(_({},s.styles.root),s.style),f=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,y){var g;return _(_({},v),(g={},g[y]=n[y],g))},{}),m=(t=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:xl;return h.jsx("div",_({className:c.join(" "),style:d,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:h.jsx(m,{children:a.displayMonths.map(function(v,y){return h.jsx(kl,{displayIndex:y,displayMonth:v},y)})})}))}function jl(r){var e=r.children,t=Ga(r,["children"]);return h.jsx(mo,{initialProps:t,children:h.jsx(So,{children:h.jsx(il,{initialProps:t,children:h.jsx(Ao,{initialProps:t,children:h.jsx(Io,{initialProps:t,children:h.jsx(Ho,{children:h.jsx(nl,{children:e})})})})})})})}function Ol(r){return h.jsx(jl,_({},r,{children:h.jsx(Sl,{initialProps:r})}))}function Pl(){const{id:r}=dr(),[e,t]=k.useState(""),[n,s]=k.useState([]),[i,a]=k.useState(!1),[o,l]=k.useState(!1),u=async c=>{c.preventDefault(),a(!0);try{const{data:d,error:f}=await te.from("participants").insert([{event_id:r,name:e}]).select().single();if(f)throw f;const m=n.map(v=>te.from("availability").insert([{participant_id:d.id,date:v}]));await Promise.all(m),l(!0)}catch(d){console.error("Error submitting availability:",d),alert("Failed to submit availability. Please try again.")}finally{a(!1)}};return o?h.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Thank you for participating!"}),h.jsx("p",{className:"text-gray-600",children:"Your availability has been recorded."})]}):h.jsxs("div",{className:"max-w-2xl mx-auto",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Select Your Availability"}),h.jsxs("form",{onSubmit:u,className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Your Name"}),h.jsx("input",{type:"text",id:"name",value:e,onChange:c=>t(c.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Available Days"}),h.jsx("div",{className:"border rounded-md p-4",children:h.jsx(Ol,{mode:"multiple",selected:n,onSelect:s,className:"mx-auto"})})]}),h.jsx("button",{type:"submit",disabled:i||n.length===0,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:i?"Submitting...":"Submit Availability"})]})]})}function Tl(){const{id:r}=dr(),[e,t]=k.useState(null),[n,s]=k.useState([]),[i,a]=k.useState(!0),[o,l]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const{data:d,error:f}=await te.from("events").select("*").eq("id",r).single();if(f)throw f;t(d);const{data:m,error:v}=await te.from("participants").select(`
            id,
            name,
            availability (date)
          `).eq("event_id",r);if(v)throw v;const y=m.map(g=>({id:g.id,name:g.name,availability:g.availability.map(x=>x.date)}));s(y)}catch(d){console.error("Error fetching event data:",d),alert("Failed to load event data. Please try again.")}finally{a(!1)}})()},[r]);const u=()=>{const c=`${window.location.origin}/event/${r}`;navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)};return i?h.jsx("div",{className:"max-w-4xl mx-auto text-center py-12",children:h.jsx("div",{className:"animate-pulse",children:"Loading..."})}):e?h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.title}),e.description&&h.jsx("p",{className:"mt-2 text-gray-600",children:e.description})]}),h.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[h.jsx(Cn,{className:"h-4 w-4 mr-2"}),o?"Copied!":"Share Link"]})]}),h.jsxs("div",{className:"mt-8",children:[h.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Participants (",n.length,")"]}),n.length===0?h.jsx("p",{className:"text-gray-600",children:"No participants yet. Share the link to invite people!"}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Dates"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.name}),h.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.availability.length>0?h.jsx("ul",{children:c.availability.map(d=>h.jsx("li",{children:new Date(d).toLocaleDateString()},d))}):h.jsx("span",{className:"text-gray-400",children:"No dates selected"})})]},c.id))})]})})]})]})}):h.jsx("div",{className:"max-w-4xl mx-auto text-center py-12",children:h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Event not found"})})}function Cl(){return h.jsx(pn,{children:h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("nav",{className:"bg-white shadow-sm",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-between h-16 items-center",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx(Tn,{className:"h-8 w-8 text-indigo-600"}),h.jsx("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"ScheduleSync"})]})})})}),h.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsxs(_n,{children:[h.jsx(rt,{path:"/",element:h.jsx(Fi,{})}),h.jsx(rt,{path:"/event/:id",element:h.jsx(Pl,{})}),h.jsx(rt,{path:"/dashboard/:id",element:h.jsx(Tl,{})})]})})]})})}mr(document.getElementById("root")).render(h.jsx(k.StrictMode,{children:h.jsx(Cl,{})}));
